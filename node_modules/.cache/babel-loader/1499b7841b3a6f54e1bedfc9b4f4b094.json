{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/mac/Desktop/Darasimi files/News update app (React)/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/mac/Desktop/Darasimi files/News update app (React)/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac/Desktop/Darasimi files/News update app (React)/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/mac/Desktop/Darasimi files/News update app (React)/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useRef}from\"react\";import NavBar from\"./NavBar\";import styles from\"./SearchNews.module.css\";import SearchNewsFeed from\"./SearchNewsFeed\";import Loader from\"./Loader\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function SearchNews(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),feed=_useState2[0],setFeed=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var inputRef=useRef('');function fetchedNewsHandler(){return _fetchedNewsHandler.apply(this,arguments);}function _fetchedNewsHandler(){_fetchedNewsHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var endpoint,response,data,loadedFeed,newsList,_iterator,_step,newsLists;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setFeed([]);setLoading(true);setError(null);endpoint=\"https://gnews.io/api/v4/search?q=\".concat(inputRef.current.value,\"&token=8bf54c1726132fb46b390fde828c303a&lang=en\");_context.prev=4;_context.next=7;return fetch(endpoint);case 7:response=_context.sent;if(response.ok){_context.next=10;break;}throw new Error(\"Something Went Wrong.Try again tomorrow\");case 10:_context.next=12;return response.json();case 12:data=_context.sent;loadedFeed=[];newsList=data.articles;_iterator=_createForOfIteratorHelper(newsList);try{for(_iterator.s();!(_step=_iterator.n()).done;){newsLists=_step.value;loadedFeed.push({time:newsLists.publishedAt,id:newsLists.publishedAt,title:newsLists.title,content:newsLists.content,image:newsLists.image,url:newsLists.url,source:newsLists.source.name});setFeed(loadedFeed);}}catch(err){_iterator.e(err);}finally{_iterator.f();}_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](4);setError(_context.t0.message);case 22:setLoading(false);case 23:case\"end\":return _context.stop();}}},_callee,null,[[4,19]]);}));return _fetchedNewsHandler.apply(this,arguments);}var submitFormHandler=function submitFormHandler(e){e.preventDefault();if(inputRef.current.value=''){return;}fetchedNewsHandler();inputRef.current.value='';};var searchChangeHandler=function searchChangeHandler(){inputRef.current.value;};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.cover,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.header,children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Search\",/*#__PURE__*/_jsx(\"span\",{className:styles.span,children:\"News...\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.form,children:/*#__PURE__*/_jsx(\"form\",{onSubmit:submitFormHandler,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.input,children:[/*#__PURE__*/_jsx(\"input\",{onChange:searchChangeHandler,ref:inputRef,placeholder:\"Search news...\",type:\"search\"}),/*#__PURE__*/_jsx(\"button\",{children:\"Submit\"})]})})})]}),/*#__PURE__*/_jsx(SearchNewsFeed,{feeds:feed})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.error,children:error&&/*#__PURE__*/_jsxs(\"h1\",{children:[error,\" or Check your internet connection \\uD83D\\uDC40\"]})})]});}export default SearchNews;","map":{"version":3,"names":["React","useState","useRef","NavBar","styles","SearchNewsFeed","Loader","SearchNews","feed","setFeed","error","setError","loading","setLoading","inputRef","fetchedNewsHandler","endpoint","current","value","fetch","response","ok","Error","json","data","loadedFeed","newsList","articles","newsLists","push","time","publishedAt","id","title","content","image","url","source","name","message","submitFormHandler","e","preventDefault","searchChangeHandler","cover","header","span","form","input"],"sources":["/Users/mac/Desktop/Darasimi files/News update app (React)/src/Components/SearchNews.js"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport NavBar from \"./NavBar\";\nimport styles from \"./SearchNews.module.css\";\nimport SearchNewsFeed from \"./SearchNewsFeed\";\nimport Loader from \"./Loader\";\n\nfunction SearchNews() {\n  let [feed, setFeed] = useState([]);\n  let [error, setError] = useState(null);\n  let [loading, setLoading] = useState(false);\n  let inputRef = useRef('')\n\n  async function fetchedNewsHandler() {\n    setFeed([]);\n    setLoading(true);\n    setError(null);\n    let endpoint =\n      `https://gnews.io/api/v4/search?q=${inputRef.current.value}&token=8bf54c1726132fb46b390fde828c303a&lang=en`\n    try {\n      let response = await fetch(endpoint);\n      if (!response.ok) {\n        throw new Error(\"Something Went Wrong.Try again tomorrow\");\n      }\n      let data = await response.json();\n      let loadedFeed = [];\n      let newsList = data.articles;\n      for (let newsLists of newsList) {\n        loadedFeed.push({\n          time: newsLists.publishedAt,\n          id: newsLists.publishedAt,\n          title: newsLists.title,\n          content: newsLists.content,\n          image: newsLists.image,\n          url: newsLists.url,\n          source: newsLists.source.name,\n        });\n        setFeed(loadedFeed);\n      }\n    } catch (error) {\n      setError(error.message);\n    }\n    setLoading(false);\n  }\n\n  let submitFormHandler = (e) => {\n    e.preventDefault()\n    if(inputRef.current.value = ''){\n      return;\n    }\n    fetchedNewsHandler()\n    inputRef.current.value = ''\n\n  }\n\n  let searchChangeHandler = () => {\n    inputRef.current.value\n  }\n  return (\n    <>\n      {loading && <Loader />}\n      <div>\n        <div>\n          <NavBar />\n          <div className={styles.cover}>\n            <div className={styles.header}>\n              <h1>Search<span className={styles.span}>News...</span></h1>\n            </div>\n            <div className={styles.form}>\n              <form\n                onSubmit={submitFormHandler}>\n                <div className={styles.input}>\n                  <input\n                    onChange={searchChangeHandler}\n                    ref={inputRef}\n                    placeholder=\"Search news...\"\n                    type='search' />\n                  <button>Submit</button>\n                </div>\n              </form>\n            </div>\n          </div>\n          <SearchNewsFeed feeds={feed} />\n        </div>\n      </div>\n      <div className={styles.error}>\n        {error && <h1>{error} or Check your internet connection ðŸ‘€</h1>}\n      </div>\n    </>\n  );\n}\n\nexport default SearchNews;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}